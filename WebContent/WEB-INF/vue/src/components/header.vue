<template>
  <div>
    <div class="new_header" style="position: relative;width: 100%;height: 54px;background-color: #144484;z-index: 100">
      <div class="new_header_logo"></div>
      <div class="new_header_title"></div>
      <span class="new_header_name">欢迎，{{loginName}}</span>
      <a id="editpass" href="javascript:void(0)" class="new_header_change" @click="modifyPassword">修改密码</a>
      <a id="loginOut" href="javascript:void(0)" class="new_header_loginout" @click="logout">安全退出</a>
    </div>
    <el-dialog title="修改密码" :visible.sync="ifShowModifyPassword" size="tiny" v-drag>
      <el-form :model="form">
        <el-form-item label="旧密码" :label-width="formLabelWidth">
          <el-input v-model="form.oldPassword" auto-complete="off" placeholder="请输入原密码" icon="edit"></el-input>
        </el-form-item>
        <el-form-item label="新密码" :label-width="formLabelWidth">
          <el-input v-model="form.newPassword" auto-complete="off" placeholder="密码由数字、字母和字符组成" icon="edit"></el-input>
        </el-form-item>
        <el-form-item label="确认密码" :label-width="formLabelWidth">
          <el-input v-model="form.surePassword" auto-complete="off" placeholder="请重复输入新密码"  icon="edit"></el-input>
        </el-form-item>
      </el-form>
      <div slot="footer" class="dialog-footer" style="text-align: center">
          <el-button type="primary" @click="sureModifyPassword">确 定</el-button>
        <el-button @click="cancelModifyPassword">取 消</el-button>
      </div>
    </el-dialog>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      


  </div>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             
</template>
<script>
import {exitSys} from '../api/api'
    export default{
        name: "",
        data(){
            return {
              ifShowModifyPassword:false,
              form:{
                oldPassword:'',
                newPassword:'',
                surePassword:''
              },
              formLabelWidth:'80px',
            }
        },
        mounted(){

        },
        computed: {
          loginName(){
            return sessionStorage.name_cn;
          }
        },
        methods: {
          logout(){
              this.$confirm('您确定要退出本次登录吗?', '系统提示', {
                confirmButtonText: '确定',
                cancelButtonText: '取消',
                type: 'warning'
              }).then(() => {
                exitSys().then((res) => {
                  this.$store.commit('cleanSessionTabs');
                      if(res.data.code == 1){
                          this.$message({
                            type: 'success',
                            message: '退出成功!'
                          });
                          this.$router.push({path:'/login'});
                      }else{
                          this.$message({showClose: true,message: '退出失败！',type: 'error'});
                      }
                });
            }).catch(() => {
                this.$message({
                type: 'info',
                message: '已取消退出'
              });
            });
          },
          modifyPassword(){
            this.ifShowModifyPassword=true;
          },
          cancelModifyPassword(){
            this.ifShowModifyPassword=false;
          },
          sureModifyPassword(){
            this.ifShowModifyPassword=false;
            this.$message({
              message: '修改密码成功！',
              type: 'success'
            });
          }
        }
    }
</script>
<style scoped>
  .new_header_logo{width: 140px;height: 40px;position: absolute;top: 9px;left: 20px;background: url(../assets/images/logo.png) no-repeat;background-size: 100%;}
  .new_header_title{width: 280px;height: 25px;position: absolute;top: 15px;left: 180px;background: url(../assets/images/titlefont.png) no-repeat;background-size: 100%;}
  .new_header_name{display: inline-block;position: absolute;right: 200px;top: 17px;color: #fff;font-size: 14px;cursor: default;}
  .new_header_change{display: inline-block;position: absolute;right: 110px;top: 17px;font-size: 14px;color: #fff;text-decoration: none;cursor: pointer;}
  .new_header_loginout{display: inline-block;position: absolute;right: 15px;top: 11px;padding:6px 10px;font-size: 14px;text-decoration: none;border-radius: 6px;background: url(../assets/images/loginoutbtn.png) no-repeat;background-size: 100%;cursor: pointer;color: #fff;}
  .new_header_loginout:hover,.new_header_change:hover {color: white;text-decoration: none;}
</style>
